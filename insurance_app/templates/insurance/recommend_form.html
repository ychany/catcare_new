{% extends 'common_app/base.html' %}
{% load static %}
{% load insurance_tags %}

{% block title %}보험 추천 - 냐옹노트{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-lg border-0 rounded-4 p-0" style="overflow:hidden;">
        <div class="card-header bg-white text-center border-0 p-4" style="background:linear-gradient(135deg, #2563eb 60%, #16a34a 100%);">
          <div style="margin-bottom:16px;">
            <i class="fas fa-shield-alt" style="font-size:48px; color:#fff;"></i>
          </div>
          <h2 class="fw-bold mb-1" style="color:#fff; letter-spacing:1px;">우리 아이 맞춤형 보험 추천받기</h2>
          <div class="body-text" style="color:#fff; opacity:0.9;">필요한 보장 항목을 선택해 주세요</div>
        </div>
        <div class="card-body p-4 bg-white">
          <form method="post" action="{% url 'insurance:recommend' pet_profile_id %}">
            {% csrf_token %}
            <div class="row row-cols-1 row-cols-md-2 g-4 align-items-stretch">
              {% for label, key in preference_fields %}
              <div class="col d-flex">
                <div class="w-100 p-3 border rounded-3 shadow-sm bg-light d-flex flex-column justify-content-between" style="min-height:120px;">
                  <label class="form-label fw-semibold mb-2" style="font-size:1.1rem;"><i class="fas fa-check-circle me-1 text-primary"></i> {{ label }}</label>
                  <div class="d-flex gap-2 flex-wrap align-items-center">
                    {% for i in "12345" %}
                    <div class="form-check form-check-inline mb-0">
                      <input class="form-check-input" type="radio" name="{{ key }}" value="{{ forloop.counter }}" id="{{ key }}_{{ forloop.counter }}" {% if preference_dict|get_item:key|default:3 == forloop.counter %}checked{% endif %}>
                      <label class="form-check-label" for="{{ key }}_{{ forloop.counter }}">{{ forloop.counter }}</label>
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
            <div class="d-flex justify-content-between mt-4">
              <button type="submit" class="btn btn-primary px-4 rounded-pill" style="font-weight:600; font-size:1.1rem;">선호도 반영하여 추천받기</button>
              <a href="{% url 'insurance:main' %}" class="btn btn-outline-secondary px-4 rounded-pill">취소</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.card {
  border-radius: 24px;
  box-shadow: 0 4px 24px 0 rgb(37 99 235 / 10%);
}
.form-label {
  font-weight: 600;
  font-size: 1rem;
}
input.form-check-input[type="radio"] {
  accent-color: #2563eb;
  width: 18px;
  height: 18px;
}
input.form-check-input:focus {
  box-shadow: 0 0 0 2px #2563eb33;
}
input.form-check-input:checked {
  background-color: #2563eb;
  border-color: #2563eb;
}
.card-header {
  border-radius: 0 0 32px 32px;
}
.border.rounded-3.shadow-sm.bg-light {
  transition: box-shadow 0.2s, border 0.2s;
}
.border.rounded-3.shadow-sm.bg-light:focus-within {
  box-shadow: 0 0 0 2px #2563eb33;
  border-color: #2563eb;
}
</style>
{% endblock %} 